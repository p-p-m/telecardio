<!DOCTYPE html>
<html>
    <head>
        <title>Stats</title>
        <style>
            table { width: 50%; border-collapse: collapse; margin: 20px 0; }
            th, td { border: 1px solid black; padding: 10px; text-align: left; }
            th { background-color: #f2f2f2; }
        </style>
        <script>
        fetch('/scheduler/status')
            .then(response => response.json())
            .then(data => {
                document.getElementById('config-status').textContent = 'Config status: ' + (data.status || JSON.stringify(data));
            })
            .catch(error => {
                document.getElementById('config-status').textContent = 'Error loading config status';
            });
        </script>
    </head>
    <body>
        <a href="/">Stats</a> | <a href="/edit-config">Edit config</a>
        <h2>{{ name }}</h2>
        <a href="{{ previous_month_link }}">Previous Month</a> | <a href="{{ next_month_link }}">Next Month</a>
        <table>
            <tr>
                {% for cell in headers %}
                <th>{{ cell }}</th>
                {% endfor %}
            </tr>
            {% for row in data %}
            <tr>
                {% for cell in row %}
                <td>
                    {% if cell.link %}
                        <a href="{{ cell.link }}">{{ cell }}</a>
                    {% else %}
                        {{ cell }}
                    {% endif %}
                </td>
                {% endfor %}
            </tr>
            {% endfor %}
        </table>
        
        <hr>
        <div id="config-status">Loading config status...</div>
    </body>
</html>

